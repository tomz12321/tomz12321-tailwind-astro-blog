---
title: è¸å…¥è‡ªåª’é«”çš„ 30 å¤© - Day 11
author: Tomzyang
date: 2024-03-11
tags: ["astro", "successes", "30days"]
draft: false
summary: 'ä»Šå¤©è¦ä¾†æ¼”ç¤º 5 mins å¿«é€Ÿåœ°åšä¸€å€‹ Chrome Extension çš„å¾®å°ˆæ¡ˆã€‚'

---
# Day #11

### å‰è¨€
30 days çš„é–‹å§‹
è¸å…¥è‡ªåª’é«”çš„ 30 å¤©â—ï¸- æˆ‘æœ‰å€‹æœ‹å‹åœ¨åšè‡ªåª’é«”

### Image
Here we go :


![image](/static/images/hereWeGo.jpg)

### é»˜é»˜å°èª

æœ€è¿‘é–‹å§‹ç”¨ JS åˆ·é¡Œï¼Œ
ä½†æ˜¯åŒæ™‚å»ºç«‹åŸºç¤çŸ¥è­˜ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚

---

### æ­£æ–‡é–‹å§‹

ä»Šå¤©è¦ä¾†æ¼”ç¤º 5 mins å¿«é€Ÿåœ°åšä¸€å€‹ Chrome Extension çš„å¾®å°ˆæ¡ˆã€‚

ä»¥ä¸‹æœƒç”¨åˆ°çš„å·¥å…·åªæœƒæœ‰

- ç¶²é å‰ç«¯ä¸‰åŠå®¢ HTML / CSS / JavaScript
- ä¸€å€‹ IDEï¼Œæˆ‘è‡ªå·±æ˜¯ç”¨ VS Code
- ä¸€å€‹ Browser (e.g. Chrome)
- terminal çµ‚ç«¯æ©Ÿ (macOS bashshell)


é¦–å…ˆæˆ‘å€‘å…ˆç…§è‘—ä¸‹é¢çš„å°ˆæ¡ˆæ¶æ§‹

å»ºç«‹ä¸€çµ„ 

index.html
index.js
style.css


ä½¿ç”¨ mac å…§å»ºçš„ bashshell å¿«é€Ÿåšæ³•
```
#!/bin/bash

mkdir simple-color-picker
cd simple-color-picker/
touch index.html
touch index.js
touch style.css
```
ç„¶å¾Œå­˜æˆ `create-simple-app.sh` ä¹‹å¾ŒåŸ·è¡Œ
```
$ chmod 777 ./create-simple-app.sh
```
å†åŸ·è¡Œ
```
$ ./create-simple-app.sh
```

åšå®Œä»¥å¾Œï¼Œä½ å°±æœƒå¾—åˆ°ä¸€å€‹ä»¥ä¸‹çš„å°ˆæ¡ˆçµæ§‹

```
Project Structure

/simple-color-picker
â”œâ”€â”€ index.html
â”œâ”€â”€ index.js
â””â”€â”€ style.css
```


å‰©ä¸‹çš„å°±æ˜¯æ‰“é–‹ IDE ç…§è‘—æ‰“

- index.html
```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Chrome Color Picker Extension | Tomzyang</title>
  </head>

  <body>
    <div class="container">
      <div class="picker">
        <button id="picker-btn">Pick Color</button>
        <button id="export-btn">Export Colors</button>
      </div>
      <div class="colors-list hide">
        <header>
          <p class="title">Picked Colors</p>
          <span id="clear-btn">Clear All</span>
        </header>
        <ul class="all-colors"></ul>
      </div>
    </div>

    <script src="index.js"></script>
  </body>
</html>
```
æˆ–è‘—å°±ç›´æ¥è¤‡è£½ code è²¼ä¸Šã€‚

- index.js
```
const pickerBtn = document.querySelector("#picker-btn");
const clearBtn = document.querySelector("#clear-btn");
const colorList = document.querySelector(".all-colors");
const exportBtn = document.querySelector("#export-btn");

// Retrieving picked colors from localstorage or initializing an empty array
let pickedColors = JSON.parse(localStorage.getItem("colors-list")) || [];

// Variable to keep track of the current color popup
let currentPopup = null;

// Function to copy text to the clipboard
const copyToClipboard = async (text, element) => {
    try {
        await navigator.clipboard.writeText(text);
        element.innerText = "Copied!";
        // Resseting element text after 1 second
        setTimeout(() => {
            element.innerText = text;
        }, 1000);
    } catch (error) {
        alert("Filed to copy text!");
    }
};

// Function to export colors as text file
const exportColors = () => {
    const colorText = pickedColors.join("\n");
    const blob = new Blob([colorText], { type: "text/plain" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "Colors.txt";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
};

// Function to create the color popup
const createColorPopup = (color) => {
    const popup = document.createElement("div");
    popup.classList.add("color-popup");
    popup.innerHTML = `
        <div class="color-popup-content">
            <span class="close-popup">x</span>
            <div class="color-info">
                <div class="color-preview" style="background: ${color};"></div>
                <div class="color-details">
                    <div class="color-value">
                        <span class="label">Hex:</span>
                        <span class="value hex" data-color="${color}">${color}</span>
                    </div>
                    <div class="color-value">
                        <span class="label">RGB:</span>
                        <span class="value rgb" data-color="${color}">${hexToRgb(color)}</span>
                    </div>
                </div>
            </div>
        </div>
    `;

    // Close button inside the popup
    const closePopup = popup.querySelector(".close-popup");
    closePopup.addEventListener('click', () => {
        document.body.removeChild(popup);
        currentPopup = null;
    });

    // Event listeners to copy color values to clipboard
    const colorValues = popup.querySelectorAll(".value");
    colorValues.forEach((value) => {
        value.addEventListener('click', (e) => {
            const text = e.currentTarget.innerText;
            copyToClipboard(text, e.currentTarget);
        });
    });

    return popup;
};

// Function to display the picked colors
const showColors = () => {
    colorList.innerHTML = pickedColors.map((color) =>
        `
            <li class="color">
                <span class="rect" style="background: ${color}; border: 1px solid ${color === "#ffffff" ? "#ccc" : color}"></span>
                <span class="value hex" data-color="${color}">${color}</span>
            </li>
        `
    ).join("");

    const colorElements = document.querySelectorAll(".color");
    colorElements.forEach((li) => {
        const colorHex = li.querySelector(".value.hex");
        colorHex.addEventListener('click', (e) => {
            const color = e.currentTarget.dataset.color;
            if (currentPopup) {
                document.body.removeChild(currentPopup);
            }
            const popup = createColorPopup(color);
            document.body.appendChild(popup);
            currentPopup = popup;
        });
    });

    const pickedColorsContainer = document.querySelector(".colors-list");
    pickedColorsContainer.classList.toggle("hide", pickedColors.length === 0);
};

// Function to convert a hex color code to rgb format
const hexToRgb = (hex) => {
    const bigint = parseInt(hex.slice(1), 16);
    const r = (bigint >> 16) & 255;
    const g = (bigint >> 8) & 255;
    const b = bigint & 255;
    return `rgb(${r}, ${g}, ${b})`;
};

// Function to activate the eye dropper color picker
const activateEyeDropper = async () => {
    document.body.style.display = "none";
    try {
        // Opening the eye dropper and retrieving the selected color
        const { sRGBHex } = await new EyeDropper().open();

        if (!pickedColors.includes(sRGBHex)) {
            pickedColors.push(sRGBHex);
            localStorage.setItem("colors-list", JSON.stringify(pickedColors));
        }

        showColors();
    } catch (error) {
        alert("Filed to copy the color code!");
    } finally {
        document.body.style.display = "block";
    }
};

// Function to clear all picked colors
const clearAllColors = () => {
    pickedColors = [];
    localStorage.removeItem("colors-list");
    showColors();
};

// Event listeners for buttons
clearBtn.addEventListener('click', clearAllColors);
pickerBtn.addEventListener('click', activateEyeDropper);
exportBtn.addEventListener('click', exportColors);

// Displaying picked colors on document load
showColors();
```

- `style.css`
```
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');

*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

.container{
    background-color: #fff;
    width: 350px;
}

.container :where(.picker, header, .all-colors){
    display: flex;
    align-items: center;
    border-radius: 0 0 35px 35px;
}

.container .picker{
    padding: 35px 0;
    background-color: #c8e6c9;
    justify-content: center;
}

.picker #picker-btn{
    margin-right: 8px;
}

.picker #picker-btn, .picker #export-btn{
    border: none;
    outline: none;
    color: #fff;
    font-size: 1rem;
    cursor: pointer;
    padding: 6px 12px;
    background-color: #43a047;
    border-radius: 5px;
    transition: all 0.3s ease;
}

.picker #picker-btn:hover, .picker #export-btn:hover{
    background-color: #2e7d32;
}

.colors-list{
    margin: 10px 15px;
}

.colors-list header{
    justify-content: space-between;
}

header .title{
    font-size: 1rem;
}

header #clear-btn{
    cursor: pointer;
    font-size: 0.9rem;
    color: #43a047;
}

header #clear-btn:hover{
    color: #2e7d32;
}

.colors-list.hide{
    display: none;
}

.colors-list .all-colors{
    flex-wrap: wrap;
    list-style: none;
    margin: 10px 0 0;
}

.all-colors .color{
    display: flex;
    cursor: pointer;
    margin-bottom: 10px;
    width: calc(100% / 3);
}

.all-colors .rect{
    height: 22px;
    width: 22px;
    display: block;
    margin-right: 3px;
    border-radius: 3px;
}

.all-colors .color span{
    font-size: 0.86rem;
    font-weight: 500;
    text-transform: uppercase;
}

.color-popup{
    position: fixed;
    top: 52px;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    z-index: 9999;
}

.color-popup-content{
    padding: 20px;
}

.color-info{
    display: flex;
    align-items: center;
}

.color-preview{
    width: 50px;
    height: 50px;
    border-radius: 5px;
    margin-right: 10px;
}

.color-details{
    flex-grow: 1;
}

.color-value{
    display: flex;
    align-items: center;
    margin-bottom: 5px;
}

.label{
    font-weight: bold;
    margin-right: 5px;
}

.value{
    cursor: pointer;
}

span.close-popup{
    font-size: 14px;
    cursor: pointer;
    float: right;
}
```

ç„¶å¾Œä½ éœ€è¦ä¸€å€‹ `manifest.json`
```
{
  "manifest_version": 3,
  "name": "Color Picker",
  "description": "Simple Color Picker Extension that we created. Pick any color on web page, Picked Colors history, Copy RGB and Hex or Clear them with a single click.",
  "version": "1.0",
  "action": {
      "default_popup": "index.html"
  },
  "icons": {
      "16": "icons/icon16.png",
      "32": "icons/icon32.png",
      "48": "icons/icon48.png",
      "128": "icons/icon128.png"
  }
}
```

æˆ‘å€‘éœ€è¦æ–°å¢ä¸€å€‹ï¼Œ`/icons` è³‡æ–™å¤¾ï¼Œæ”¾ icons 

- ä¾†é€™é‚Šä¸‹è¼‰æˆ‘å€‘æœƒç”¨åˆ°çš„ icons
[/icons](https://github.com/tomz12321/simple-color-picker/tree/main/icons)

- æ¥ä¸‹ä¾†çš„æ­¥é©Ÿæ¯”è¼ƒè¤‡é›œï¼Œæœƒç”¨åˆ° Chrome çš„ Developer Mode 

Chrome é–‹å•Ÿä¸€å€‹åˆ†é ã€‚åœ¨ç¶²å€åˆ—è¼¸å…¥ï¼š
```
chrome://extensions/
```

è·Ÿä¸Šäº†

- å³ä¸Šè§’é–‹å•Ÿ Developer Mode 
- é–‹å•Ÿä»¥å¾Œï¼Œåœ¨å·¦ä¸Šè§’æ‰¾åˆ° `Load unpacked` æŒ‰éˆ•
![image](/static/images/Day11/screenshot-11-1-click-on-load-unpack.png)
- é¸æ“‡ä½ çš„å°ˆæ¡ˆè³‡æ–™å¤¾æ“ºæ”¾ä½ç½®
![image](/static/images/Day11/screenshot-11-2-select-folder.png)
- é–‹å•Ÿ extensions ä¸¦é‡˜é¸ä½ å‰›å‰›æ–°åŠ å…¥çš„ extension - color picker
![image](/static/images/Day11/screenshot-11-3-pin-your-new-extension.png)

ç„¶å¾Œä½ å°±å¾—åˆ°ä¸€å€‹ Color Picker çš„ Extension äº†
![image](/static/images/Day11/screenshot-11-4-result.png)

ä»¥ä¸Š 10 mins å…§å¿«é€Ÿå®Œæˆä¸€å€‹ Color Picker

å¦‚æœå¤§å®¶å°é€™å€‹ä¸»é¡Œæœ‰èˆˆè¶£çš„è©±ï¼Œ

æ‰¾æ™‚é–“ï¼Œæˆ‘å€‘æœƒå†ä¾† Speed Run ä¸€è¼ªï¼Œæ‰‹åˆ»ä¸€å€‹ è¨ˆç®—æ©Ÿã€‚

å®Œæ•´ Github Repo ([å‚³é€é–€](https://github.com/tomz12321/simple-color-picker))

---

#### åƒè€ƒè³‡æ–™
- [Bash Shell æ˜¯ä»€éº¼?](https://medium.com/hannah-lin/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98-bash-script-8926bbc0ac44)
- [Javascript30](https://javascript30.com/)
- [100 Days of JavaScript Coding](https://www.youtube.com/playlist?list=PLkC56g8fboI0HghByzVuD2Vz8ROUXfF_j)

```
å°å•Šæˆ‘æ˜¯ä¸€å€‹å®…å®…å·¥ç¨‹å¸«ï¼Œ
æ‰¾äººä¸€èµ· code æ˜¯æˆ‘çš„æ—¥å¸¸ã€‚
```

ğŸ”»æ”¯æŒæ‰“è³ğŸ”»
Welcome to my github [https://github.com/tomz12321]
å–œæ­¡çš„è©±ï¼Œéš¨ä¾¿æ‰¾å€‹å°ˆæ¡ˆçµ¦é¡†æ˜Ÿã€‚
